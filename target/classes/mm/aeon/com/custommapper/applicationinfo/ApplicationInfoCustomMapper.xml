<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="mm.aeon.com.custommapper.applicationinfo.ApplicationInfoCustomMapper">


	<insert id="insertApplicationInfo"
		parameterType="mm.aeon.com.zgen.entity.DaApplicationInfo"
		useGeneratedKeys="true" keyProperty="daApplicationInfoId">
		insert into da_application_info
		<trim prefix="(" suffix=")" suffixOverrides=",">
	      <if test="daApplicationInfoId != null">
	        da_application_info_id,
	      </if>
	      <if test="applicationNo != null">
	        application_no,
	      </if>
	      <if test="daApplicationTypeId != null">
	        da_application_type_id,
	      </if>
	      <if test="appliedDate != null">
	        applied_date,
	      </if>
	      <if test="name != null">
	        name,
	      </if>
	      <if test="dob != null">
	        dob,
	      </if>
	      <if test="nrcNo != null">
	        nrc_no,
	      </if>
	      <if test="fatherName != null">
	        father_name,
	      </if>
	      <if test="nationality != null">
	        nationality,
	      </if>
	      <if test="nationalityOther != null">
	        nationality_other,
	      </if>
	      <if test="gender != null">
	        gender,
	      </if>
	      <if test="maritalStatus != null">
	        marital_status,
	      </if>
	      <if test="currentAddress != null">
	        current_address,
	      </if>
	      <if test="permanentAddress != null">
	        permanent_address,
	      </if>
	      <if test="typeOfResidence != null">
	        type_of_residence,
	      </if>
	      <if test="typeOfResidenceOther != null">
	        type_of_residence_other,
	      </if>
	      <if test="livingWith != null">
	        living_with,
	      </if>
	      <if test="livingWithOther != null">
	        living_with_other,
	      </if>
	      <if test="yearOfStayYear != null">
	        year_of_stay_year,
	      </if>
	      <if test="yearOfStayMonth != null">
	        year_of_stay_month,
	      </if>
	      <if test="mobileNo != null">
	        mobile_no,
	      </if>
	      <if test="residentTelNo != null">
	        resident_tel_no,
	      </if>
	      <if test="otherPhoneNo != null">
	        other_phone_no,
	      </if>
	      <if test="email != null">
	        email,
	      </if>
	      <if test="customerId != null">
	        customer_id,
	      </if>
	      <if test="status != null">
	        status,
	      </if>
	      <if test="daInterestInfoId != null">
	        da_interest_info_id,
	      </if>
	      <if test="daCompulsoryInfoId != null">
	        da_compulsory_info_id,
	      </if>
	      <if test="daLoanTypeId != null">
	        da_loan_type_id,
	      </if>
	      <if test="financeAmount != null">
	        finance_amount,
	      </if>
	      <if test="financeTerm != null">
	        finance_term,
	      </if>
	      <if test="daProductTypeId != null">
	        da_product_type_id,
	      </if>
	      <if test="productDescription != null">
	        product_description,
	      </if>
	      <if test="channelType != null">
	        channel_type,
	      </if>
	      <if test="createdTime != null">
	        created_time,
	      </if>
	      <if test="createdBy != null">
	        created_by,
	      </if>
	      <if test="updatedTime != null">
	        updated_time,
	      </if>
	      <if test="updatedBy != null">
	        updated_by,
	      </if>
	      <if test="delFlag != null">
	        del_flag,
	      </if>
	      <if test="settlementPendingComment != null">
	        settlement_pending_comment,
	      </if>
	      <if test="lockFlag != null">
	        lock_flag,
	      </if>
	      <if test="lockedTime != null">
	        locked_time,
	      </if>
	      <if test="lockedBy != null">
	        locked_by,
	      </if>
	      <if test="fullyPaidFlag != null">
	        fully_paid_flag,
	      </if>
	      <if test="currentAddressFloor != null">
	        current_address_floor,
	      </if>
	      <if test="currentAddressBuildingNo != null">
	        current_address_building_no,
	      </if>
	      <if test="currentAddressRoomNo != null">
	        current_address_room_no,
	      </if>
	      <if test="currentAddressStreet != null">
	        current_address_street,
	      </if>
	      <if test="currentAddressQtr != null">
	        current_address_qtr,
	      </if>
	      <if test="permanentAddressBuildingNo != null">
	        permanent_address_building_no,
	      </if>
	      <if test="permanentAddressRoomNo != null">
	        permanent_address_room_no,
	      </if>
	      <if test="permanentAddressFloor != null">
	        permanent_address_floor,
	      </if>
	      <if test="permanentAddressStreet != null">
	        permanent_address_street,
	      </if>
	      <if test="permanentAddressQtr != null">
	        permanent_address_qtr,
	      </if>
	      <if test="currentAddressTownship != null">
	        current_address_township,
	      </if>
	      <if test="currentAddressCity != null">
	        current_address_city,
	      </if>
	      <if test="permanentAddressTownship != null">
	        permanent_address_township,
	      </if>
	      <if test="permanentAddressCity != null">
	        permanent_address_city,
	      </if>
	      <if test="saleEntryCheckFlag != null">
	        sale_entry_check_flag,
	      </if>
	      <if test="highestEducationTypeId != null">
	        highest_education_type_id,
	      </if>
	       <if test="approvedFinanceAmount != null">
	        approved_finance_amount,
	      </if>
	       <if test="approvedFinanceTerm != null">
	        approved_finance_term,
	      </if>
	       <if test="modifyFinanceAmount != null">
	        modify_finance_amount,
	      </if>
	       <if test="modifyFinanceTerm != null">
	        modify_finance_term,
	      </if>
	    </trim>
	    <trim prefix="values (" suffix=")" suffixOverrides=",">
	      <if test="daApplicationInfoId != null">
	        #{daApplicationInfoId,jdbcType=INTEGER},
	      </if>
	      <if test="applicationNo != null">
	        #{applicationNo,jdbcType=VARCHAR},
	      </if>
	      <if test="daApplicationTypeId != null">
	        #{daApplicationTypeId,jdbcType=INTEGER},
	      </if>
	      <if test="appliedDate != null">
	        #{appliedDate,jdbcType=TIMESTAMP},
	      </if>
	      <if test="name != null">
	        #{name,jdbcType=VARCHAR},
	      </if>
	      <if test="dob != null">
	        #{dob,jdbcType=DATE},
	      </if>
	      <if test="nrcNo != null">
	        #{nrcNo,jdbcType=VARCHAR},
	      </if>
	      <if test="fatherName != null">
	        #{fatherName,jdbcType=VARCHAR},
	      </if>
	      <if test="nationality != null">
	        #{nationality,jdbcType=INTEGER},
	      </if>
	      <if test="nationalityOther != null">
	        #{nationalityOther,jdbcType=VARCHAR},
	      </if>
	      <if test="gender != null">
	        #{gender,jdbcType=INTEGER},
	      </if>
	      <if test="maritalStatus != null">
	        #{maritalStatus,jdbcType=INTEGER},
	      </if>
	      <if test="currentAddress != null">
	        #{currentAddress,jdbcType=VARCHAR},
	      </if>
	      <if test="permanentAddress != null">
	        #{permanentAddress,jdbcType=VARCHAR},
	      </if>
	      <if test="typeOfResidence != null">
	        #{typeOfResidence,jdbcType=INTEGER},
	      </if>
	      <if test="typeOfResidenceOther != null">
	        #{typeOfResidenceOther,jdbcType=VARCHAR},
	      </if>
	      <if test="livingWith != null">
	        #{livingWith,jdbcType=INTEGER},
	      </if>
	      <if test="livingWithOther != null">
	        #{livingWithOther,jdbcType=VARCHAR},
	      </if>
	      <if test="yearOfStayYear != null">
	        #{yearOfStayYear,jdbcType=INTEGER},
	      </if>
	      <if test="yearOfStayMonth != null">
	        #{yearOfStayMonth,jdbcType=INTEGER},
	      </if>
	      <if test="mobileNo != null">
	        #{mobileNo,jdbcType=VARCHAR},
	      </if>
	      <if test="residentTelNo != null">
	        #{residentTelNo,jdbcType=VARCHAR},
	      </if>
	      <if test="otherPhoneNo != null">
	        #{otherPhoneNo,jdbcType=VARCHAR},
	      </if>
	      <if test="email != null">
	        #{email,jdbcType=VARCHAR},
	      </if>
	      <if test="customerId != null">
	        #{customerId,jdbcType=INTEGER},
	      </if>
	      <if test="status != null">
	        #{status,jdbcType=INTEGER},
	      </if>
	      <if test="daInterestInfoId != null">
	        #{daInterestInfoId,jdbcType=INTEGER},
	      </if>
	      <if test="daCompulsoryInfoId != null">
	        #{daCompulsoryInfoId,jdbcType=INTEGER},
	      </if>
	      <if test="daLoanTypeId != null">
	        #{daLoanTypeId,jdbcType=INTEGER},
	      </if>
	      <if test="financeAmount != null">
	        #{financeAmount,jdbcType=NUMERIC},
	      </if>
	      <if test="financeTerm != null">
	        #{financeTerm,jdbcType=INTEGER},
	      </if>
	      <if test="daProductTypeId != null">
	        #{daProductTypeId,jdbcType=INTEGER},
	      </if>
	      <if test="productDescription != null">
	        #{productDescription,jdbcType=VARCHAR},
	      </if>
	      <if test="channelType != null">
	        #{channelType,jdbcType=INTEGER},
	      </if>
	      <if test="createdTime != null">
	        #{createdTime,jdbcType=TIMESTAMP},
	      </if>
	      <if test="createdBy != null">
	        #{createdBy,jdbcType=VARCHAR},
	      </if>
	      <if test="updatedTime != null">
	        #{updatedTime,jdbcType=TIMESTAMP},
	      </if>
	      <if test="updatedBy != null">
	        #{updatedBy,jdbcType=VARCHAR},
	      </if>
	      <if test="delFlag != null">
	        #{delFlag,jdbcType=BIT},
	      </if>
	      <if test="settlementPendingComment != null">
	        #{settlementPendingComment,jdbcType=VARCHAR},
	      </if>
	      <if test="lockFlag != null">
	        #{lockFlag,jdbcType=BIT},
	      </if>
	      <if test="lockedTime != null">
	        #{lockedTime,jdbcType=TIMESTAMP},
	      </if>
	      <if test="lockedBy != null">
	        #{lockedBy,jdbcType=VARCHAR},
	      </if>
	      <if test="fullyPaidFlag != null">
	        #{fullyPaidFlag,jdbcType=BIT},
	      </if>
	      <if test="currentAddressFloor != null">
	        #{currentAddressFloor,jdbcType=VARCHAR},
	      </if>
	      <if test="currentAddressBuildingNo != null">
	        #{currentAddressBuildingNo,jdbcType=VARCHAR},
	      </if>
	      <if test="currentAddressRoomNo != null">
	        #{currentAddressRoomNo,jdbcType=VARCHAR},
	      </if>
	      <if test="currentAddressStreet != null">
	        #{currentAddressStreet,jdbcType=VARCHAR},
	      </if>
	      <if test="currentAddressQtr != null">
	        #{currentAddressQtr,jdbcType=VARCHAR},
	      </if>
	      <if test="permanentAddressBuildingNo != null">
	        #{permanentAddressBuildingNo,jdbcType=VARCHAR},
	      </if>
	      <if test="permanentAddressRoomNo != null">
	        #{permanentAddressRoomNo,jdbcType=VARCHAR},
	      </if>
	      <if test="permanentAddressFloor != null">
	        #{permanentAddressFloor,jdbcType=VARCHAR},
	      </if>
	      <if test="permanentAddressStreet != null">
	        #{permanentAddressStreet,jdbcType=VARCHAR},
	      </if>
	      <if test="permanentAddressQtr != null">
	        #{permanentAddressQtr,jdbcType=VARCHAR},
	      </if>
	      <if test="currentAddressTownship != null">
	        #{currentAddressTownship,jdbcType=INTEGER},
	      </if>
	      <if test="currentAddressCity != null">
	        #{currentAddressCity,jdbcType=INTEGER},
	      </if>
	      <if test="permanentAddressTownship != null">
	        #{permanentAddressTownship,jdbcType=INTEGER},
	      </if>
	      <if test="permanentAddressCity != null">
	        #{permanentAddressCity,jdbcType=INTEGER},
	      </if>
	      <if test="saleEntryCheckFlag != null">
	        #{saleEntryCheckFlag,jdbcType=BIT},
	      </if>
	      <if test="highestEducationTypeId != null">
	        #{highestEducationTypeId,jdbcType=INTEGER},
	      </if>
	       <if test="approvedFinanceAmount != null">
	        #{approvedFinanceAmount,jdbcType=NUMERIC},
	      </if>
	       <if test="approvedFinanceTerm != null">
	        #{approvedFinanceTerm,jdbcType=INTEGER},
	      </if>
	       <if test="modifyFinanceAmount != null">
	        #{modifyFinanceAmount,jdbcType=NUMERIC},
	      </if>
	       <if test="modifyFinanceTerm != null">
	        #{modifyFinanceTerm,jdbcType=INTEGER},
	      </if>
	    </trim>
	</insert>

	<select id="getLastApplicationNo" resultType="java.lang.String">
		SELECT
		DAI.APPLICATION_NO
		FROM
		da_application_info DAI
		WHERE
		DAI.APPLICATION_NO
		IS NOT NULL
		ORDER BY
		DAI.APPLICATION_NO DESC LIMIT 1
	</select>

	<resultMap id="interestInfoResultMap"
		type="mm.aeon.com.dto.applicationinfo.InterestInfoDto">
		<id column="DA_INTEREST_INFO_ID" jdbcType="INTEGER"
			property="daInterestInfoId" />
		<result column="INTEREST_RATE" jdbcType="DOUBLE"
			property="interestRate" />
	</resultMap>

	<select id="getInterestInfo" resultMap="interestInfoResultMap">
		SELECT
		DII.DA_INTEREST_INFO_ID,
		DII.INTEREST_RATE
		FROM
		da_interest_info DII
		WHERE
		DII.DEL_FLAG = FALSE
	</select>

	<resultMap id="compulsoryInfoResultMap"
		type="mm.aeon.com.dto.applicationinfo.CompulsoryInfoDto">
		<id column="DA_COMPULSORY_INFO_ID" jdbcType="INTEGER"
			property="daCompulsoryInfoId" />
		<result column="COMPULSORY_AMOUNT" jdbcType="DOUBLE"
			property="compulsoryAmount" />
	</resultMap>

	<select id="getCompulsoryInfo"
		resultMap="compulsoryInfoResultMap">
		SELECT
		DCI.DA_COMPULSORY_INFO_ID,
		DCI.COMPULSORY_AMOUNT
		FROM
		da_compulsory_info DCI
		WHERE
		DCI.DEL_FLAG = FALSE
	</select>

	<select id="getActiveFinanceAmountList"
		parameterType="java.lang.Integer" resultType="java.lang.Double">
		SELECT
			DAI.FINANCE_AMOUNT
		FROM
			da_application_info DAI
		WHERE
			DAI.CUSTOMER_ID = #{customerId,jdbcType=INTEGER}
		AND
			FULLY_PAID_FLAG = FALSE
		AND
			DAI.STATUS != 1
		AND
			DAI.STATUS != 8
		AND
			DAI.STATUS != 9
		<if test="daApplicationInfoId != null">
	        AND DAI.DA_APPLICATION_INFO_ID != #{daApplicationInfoId,jdbcType=INTEGER}
	     </if>
	</select>

	<resultMap id="applicationInquriesResultMap" type="mm.aeon.com.dto.applicationinfo.ApplicationInfoDto">
		<id column="DA_APPLICATION_INFO_ID" jdbcType="INTEGER" property="daApplicationInfoId" />
		<result column="APPLICATION_NO" jdbcType="VARCHAR" property="applicationNo" />
		<result column="APPLIED_DATE" jdbcType="TIMESTAMP" property="appliedDate" />
		<result column="STATUS" jdbcType="INTEGER" property="status" />
		<result column="DA_LOAN_TYPE_ID" jdbcType="INTEGER" property="daLoanTypeId" />
		<result column="FINANCE_AMOUNT" jdbcType="DOUBLE" property="financeAmount" />
		<result column="FINANCE_TERM" jdbcType="DOUBLE" property="financeTerm" />
		<result column="APPROVED_FINANCE_AMOUNT" jdbcType="DOUBLE" property="approvedFinanceAmount" />
		<result column="APPROVED_FINANCE_TERM" jdbcType="DOUBLE" property="approvedFinanceTerm" />
		<result column="APPLICATION_STATUS_CHANGED_COUNT" jdbcType="INTEGER" property="applicationStatusChangedCount" />
		<result column="APPLICATION_STATUS_CHANGED_COUNT" jdbcType="INTEGER" property="applicationStatusChangedCount" />
		<result column="AGREEMENT_NO" jdbcType="VARCHAR" property="agreementNo" />
	</resultMap>

	<select id="getApplicationInquriesList"
		parameterType="mm.aeon.com.dto.applicationinfo.ApplicationInquriesSearchCriteriaDto"
		resultMap="applicationInquriesResultMap">
		SELECT
			DAI.DA_APPLICATION_INFO_ID,
			DAI.APPLICATION_NO,
			DAI.APPLIED_DATE,
			DAI.STATUS,
			DAI.DA_LOAN_TYPE_ID,
			DAI.FINANCE_AMOUNT,
			DAI.FINANCE_TERM,
			DAI.APPROVED_FINANCE_AMOUNT,
			DAI.APPROVED_FINANCE_TERM,
			(SELECT COUNT(*) FROM da_application_info WHERE DAI.DA_APPLICATION_INFO_ID = DA_APPLICATION_INFO_ID AND STATUS_CHANGED_READ_FLAG = FALSE AND STATUS IN (5,8,9,10,17)) AS APPLICATION_STATUS_CHANGED_COUNT,
			CAL.AGREEMENT_NO
		FROM
			da_application_info DAI
		LEFT JOIN
			cust_agreement_list CAL
		ON
			DAI.APPLICATION_NO = CAL.APPLICATION_NO
		WHERE
			DAI.CUSTOMER_ID = #{customerId,jdbcType=INTEGER}
		AND
			DAI.DEL_FLAG = FALSE
		AND
			DAI.STATUS != 1
		<if test="daLoanTypeId != null">
			AND DAI.DA_LOAN_TYPE_ID = #{daLoanTypeId,jdbcType=INTEGER}
		</if>
		<if test="applicationNo != null and applicationNo != ''">
			AND DAI.APPLICATION_NO LIKE '%' ||
			#{applicationNo,jdbcType=VARCHAR} || '%'
		</if>
		<if test="appliedDateStr != null and appliedDateStr != ''">
			AND to_char(DAI.APPLIED_DATE, 'yyyyMMdd') =
			#{appliedDateStr,jdbcType=VARCHAR}
		</if>
		<if test="status != null">
			AND DAI.STATUS = #{status,jdbcType=INTEGER}
		</if>
		ORDER BY
			DAI.APPLICATION_NO
		<if test="offset != null and limit != null">
			OFFSET #{offset} LIMIT #{limit}
		</if>
	</select>

	<select id="getApplicationInquriesCount"
		parameterType="mm.aeon.com.dto.applicationinfo.ApplicationInquriesSearchCriteriaDto"
		resultType="java.lang.Integer">
		SELECT
		COUNT(*)
		FROM
		da_application_info DAI
		WHERE
		DAI.CUSTOMER_ID =
		#{customerId,jdbcType=INTEGER}
		AND
		DAI.DEL_FLAG = FALSE
		AND
		DAI.STATUS !=
		1
		<if test="daLoanTypeId != null">
			AND DAI.DA_LOAN_TYPE_ID = #{daLoanTypeId,jdbcType=INTEGER}
		</if>
		<if test="applicationNo != null and applicationNo != ''">
			AND DAI.APPLICATION_NO LIKE '%' ||
			#{applicationNo,jdbcType=VARCHAR} || '%'
		</if>
		<if test="appliedDateStr != null and appliedDateStr != ''">
			AND to_char(DAI.APPLIED_DATE, 'yyyyMMdd') =
			#{appliedDateStr,jdbcType=VARCHAR}
		</if>
		<if test="status != null">
			AND DAI.STATUS = #{status,jdbcType=INTEGER}
		</if>
	</select>

	<resultMap id="applicationInfoDetailResultMap" type="mm.aeon.com.dto.applicationinfo.ApplicationInfoDto">
		<id column="DA_APPLICATION_INFO_ID" jdbcType="INTEGER" property="daApplicationInfoId" />
		<result column="APPLICATION_NO" jdbcType="VARCHAR" property="applicationNo" />
		<result column="APPLIED_DATE" jdbcType="TIMESTAMP" property="appliedDate" />
		<result column="CUSTOMER_ID" jdbcType="INTEGER" property="customerId" />
		<result column="DA_APPLICATION_TYPE_ID" jdbcType="INTEGER" property="daApplicationTypeId" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="DOB" jdbcType="DATE" property="dob" />
		<result column="NRC_NO" jdbcType="VARCHAR" property="nrcNo" />
		<result column="FATHER_NAME" jdbcType="VARCHAR" property="fatherName" />
		<result column="NATIONALITY" jdbcType="INTEGER" property="nationality" />
		<result column="NATIONALITY_OTHER" jdbcType="VARCHAR" property="nationalityOther" />
		<result column="GENDER" jdbcType="INTEGER" property="gender" />
		<result column="MARITAL_STATUS" jdbcType="INTEGER" property="maritalStatus" />
		<result column="CURRENT_ADDRESS" jdbcType="VARCHAR" property="currentAddress" />
		<result column="PERMANENT_ADDRESS" jdbcType="VARCHAR" property="permanentAddress" />
		<result column="TYPE_OF_RESIDENCE" jdbcType="INTEGER" property="typeOfResidence" />
		<result column="TYPE_OF_RESIDENCE_OTHER" jdbcType="VARCHAR" property="typeOfResidenceOther" />
		<result column="LIVING_WITH" jdbcType="INTEGER" property="livingWith" />
		<result column="LIVING_WITH_OTHER" jdbcType="VARCHAR" property="livingWithOther" />
		<result column="YEAR_OF_STAY_YEAR" jdbcType="INTEGER" property="yearOfStayYear" />
		<result column="YEAR_OF_STAY_MONTH" jdbcType="INTEGER" property="yearOfStayMonth" />
		<result column="MOBILE_NO" jdbcType="VARCHAR" property="mobileNo" />
		<result column="RESIDENT_TEL_NO" jdbcType="VARCHAR" property="residentTelNo" />
		<result column="OTHER_PHONE_NO" jdbcType="VARCHAR" property="otherPhoneNo" />
		<result column="EMAIL" jdbcType="VARCHAR" property="email" />
		<result column="STATUS" jdbcType="INTEGER" property="status" />
		<result column="DA_INTEREST_INFO_ID" jdbcType="INTEGER" property="daInterestInfoId" />
		<result column="DA_COMPULSORY_INFO_ID" jdbcType="INTEGER" property="daCompulsoryInfoId" />
		<result column="DA_LOAN_TYPE_ID" jdbcType="INTEGER" property="daLoanTypeId" />
		<result column="FINANCE_AMOUNT" jdbcType="DOUBLE" property="financeAmount" />
		<result column="FINANCE_TERM" jdbcType="INTEGER" property="financeTerm" />
		<result column="DA_PRODUCT_TYPE_ID" jdbcType="INTEGER" property="daProductTypeId" />
		<result column="PRODUCT_DESCRIPTION" jdbcType="VARCHAR" property="productDescription" />
		<result column="CHANNEL_TYPE" jdbcType="INTEGER" property="channelType" />
		<result column="SALE_ENTRY_CHECK_FLAG" jdbcType="BOOLEAN" property="saleEntryCheckFlag" />
		<result column="HIGHEST_EDUCATION_TYPE_ID" jdbcType="INTEGER" property="highestEducationTypeId" />
			
		<result column="CURRENT_ADDRESS_FLOOR" jdbcType="VARCHAR" property="currentAddressFloor" />
		<result column="CURRENT_ADDRESS_BUILDING_NO" jdbcType="VARCHAR" property="currentAddressBuildingNo" />
		<result column="CURRENT_ADDRESS_ROOM_NO" jdbcType="VARCHAR" property="currentAddressRoomNo" />
		<result column="CURRENT_ADDRESS_STREET" jdbcType="VARCHAR" property="currentAddressStreet" />
		<result column="CURRENT_ADDRESS_QTR" jdbcType="VARCHAR" property="currentAddressQtr" />
		<result column="CURRENT_ADDRESS_TOWNSHIP" jdbcType="INTEGER" property="currentAddressTownship" />
		<result column="CURRENT_ADDRESS_CITY" jdbcType="INTEGER" property="currentAddressCity" />
		
		<result column="PERMANENT_ADDRESS_BUILDING_NO" jdbcType="VARCHAR" property="permanentAddressBuildingNo" />
		<result column="PERMANENT_ADDRESS_ROOM_NO" jdbcType="VARCHAR" property="permanentAddressRoomNo" />
		<result column="PERMANENT_ADDRESS_FLOOR" jdbcType="VARCHAR" property="permanentAddressFloor" />
		<result column="PERMANENT_ADDRESS_STREET" jdbcType="VARCHAR" property="permanentAddressStreet" />
		<result column="PERMANENT_ADDRESS_QTR" jdbcType="VARCHAR" property="permanentAddressQtr" />
		<result column="PERMANENT_ADDRESS_TOWNSHIP" jdbcType="INTEGER" property="permanentAddressTownship" />
		<result column="PERMANENT_ADDRESS_CITY" jdbcType="INTEGER" property="permanentAddressCity" />
		
		<result column="APPROVED_FINANCE_AMOUNT" jdbcType="DOUBLE" property="approvedFinanceAmount" />
		<result column="APPROVED_FINANCE_TERM" jdbcType="INTEGER" property="approvedFinanceTerm" />
		<result column="MODIFY_FINANCE_AMOUNT" jdbcType="DOUBLE" property="modifyFinanceAmount" />
		<result column="MODIFY_FINANCE_TERM" jdbcType="INTEGER" property="modifyFinanceTerm" />
		
		<result column="CREATED_BY" jdbcType="VARCHAR" property="createdBy" />
		<result column="CREATED_TIME" jdbcType="TIMESTAMP" property="createdTime" />
		<result column="UPDATED_BY" jdbcType="VARCHAR" property="updatedBy" />
		<result column="UPDATED_TIME" jdbcType="TIMESTAMP" property="updatedTime" />
			
		<association property="interestInfoDto" javaType="mm.aeon.com.dto.applicationinfo.InterestInfoDto">
			<id column="DA_INTEREST_INFO_ID" jdbcType="INTEGER" property="daInterestInfoId" />
			<result column="INTEREST_RATE" jdbcType="DOUBLE" property="interestRate" />
		</association>
		
		<association property="compulsoryInfoDto" javaType="mm.aeon.com.dto.applicationinfo.CompulsoryInfoDto">
			<id column="DA_COMPULSORY_INFO_ID" jdbcType="INTEGER" property="daCompulsoryInfoId" />
			<result column="COMPULSORY_AMOUNT" jdbcType="DOUBLE" property="compulsoryAmount" />
		</association>
		
		<association property="applicantCompanyInfoDto" javaType="mm.aeon.com.dto.applicationinfo.ApplicantCompanyInfoDto">
			<id column="DA_APPLICANT_COMPANY_INFO_ID" jdbcType="INTEGER" property="daApplicantCompanyInfoId" />
			<result column="DACI_DA_APPLICATION_INFO_ID" jdbcType="INTEGER" property="daApplicationInfoId" />
			<result column="COMPANY_NAME" jdbcType="VARCHAR" property="companyName" />
			<result column="COMPANY_ADDRESS" jdbcType="VARCHAR" property="companyAddress" />
			<result column="COMPANY_TEL_NO" jdbcType="VARCHAR" property="companyTelNo" />
			<result column="DEPARTMENT" jdbcType="VARCHAR" property="department" />
			<result column="POSITION" jdbcType="VARCHAR" property="position" />
			<result column="YEAR_OF_SERVICE_YEAR" jdbcType="INTEGER" property="yearOfServiceYear" />
			<result column="YEAR_OF_SERVICE_MONTH" jdbcType="INTEGER" property="yearOfServiceMonth" />
			<result column="COMPANY_STATUS" jdbcType="INTEGER" property="companyStatus" />
			<result column="COMPANY_STATUS_OTHER" jdbcType="VARCHAR" property="companyStatusOther" />
			<result column="MONTHLY_BASIC_INCOME" jdbcType="DOUBLE" property="monthlyBasicIncome" />
			<result column="OTHER_INCOME" jdbcType="DOUBLE" property="otherIncome" />
			<result column="TOTAL_INCOME" jdbcType="DOUBLE" property="totalIncome" />
			<result column="SALARY_DAY" jdbcType="INTEGER" property="salaryDay" />
			<result column="CONTACT_TIME_FROM" jdbcType="VARCHAR" property="contactTimeFrom" />
			<result column="CONTACT_TIME_TO" jdbcType="VARCHAR" property="contactTimeTo" />
			<result column="COMPANY_ADDRESS_BUILDING_NO" jdbcType="VARCHAR" property="companyAddressBuildingNo" />
			<result column="COMPANY_ADDRESS_ROOM_NO" jdbcType="VARCHAR" property="companyAddressRoomNo" />
			<result column="COMPANY_ADDRESS_FLOOR" jdbcType="VARCHAR" property="companyAddressFloor" />
			<result column="COMPANY_ADDRESS_STREET" jdbcType="VARCHAR" property="companyAddressStreet" />
			<result column="COMPANY_ADDRESS_QTR" jdbcType="VARCHAR" property="companyAddressQtr" />
			<result column="COMPANY_ADDRESS_TOWNSHIP" jdbcType="INTEGER" property="companyAddressTownship" />
			<result column="COMPANY_ADDRESS_CITY" jdbcType="INTEGER" property="companyAddressCity" />
			
		</association>
		
		<association property="emergencyContactInfoDto" javaType="mm.aeon.com.dto.applicationinfo.EmergencyContactInfoDto">
			<id column="DA_EMERGENCY_CONTACT_INFO_ID" jdbcType="INTEGER" property="daEmergencyContactInfoId" />
			<result column="DECI_DA_APPLICATION_INFO_ID" jdbcType="INTEGER" property="daApplicationInfoId" />
			<result column="EMERGENCY_CONTACT_NAME" jdbcType="VARCHAR" property="name" />
			<result column="EMERGENCY_CONTACT_RELATIONSHIP" jdbcType="INTEGER" property="relationship" />
			<result column="EMERGENCY_CONTACT_RELATIONSHIP_OTHER" jdbcType="VARCHAR" property="relationshipOther" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS" jdbcType="VARCHAR" property="currentAddress" />
			<result column="EMERGENCY_CONTACT_MOBILE_NO" jdbcType="VARCHAR" property="mobileNo" />
			<result column="EMERGENCY_CONTACT_RESIDENT_TEL_NO" jdbcType="VARCHAR" property="residentTelNo" />
			<result column="EMERGENCY_CONTACT_OTHER_PHONE_NO" jdbcType="VARCHAR" property="otherPhoneNo" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_FLOOR" jdbcType="VARCHAR" property="currentAddressFloor" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_BUILDING_NO" jdbcType="VARCHAR" property="currentAddressBuildingNo" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_ROOM_NO" jdbcType="VARCHAR" property="currentAddressRoomNo" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_STREET" jdbcType="VARCHAR" property="currentAddressStreet" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_QTR" jdbcType="VARCHAR" property="currentAddressQtr" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_TOWNSHIP" jdbcType="INTEGER" property="currentAddressTownship" />
			<result column="EMERGENCY_CONTACT_CURRENT_ADDRESS_CITY" jdbcType="INTEGER" property="currentAddressCity" />
		</association>
		
		<association property="guarantorInfoDto" javaType="mm.aeon.com.dto.applicationinfo.GuarantorInfoDto">
			<id column="DA_GUARANTOR_INFO_ID" jdbcType="INTEGER" property="daGuarantorInfoId" />
			<result column="DGI_DA_APPLICATION_INFO_ID" jdbcType="INTEGER" property="daApplicationInfoId" />
			<result column="GUARANTOR_NAME" jdbcType="VARCHAR" property="name" />
			<result column="GUARANTOR_DOB" jdbcType="DATE" property="dob" />
			<result column="GUARANTOR_NRC_NO" jdbcType="VARCHAR" property="nrcNo" />
			<result column="GUARANTOR_NATIONALITY" jdbcType="INTEGER" property="nationality" />
			<result column="GUARANTOR_NATIONALITY_OTHER" jdbcType="VARCHAR" property="nationalityOther" />
			<result column="GUARANTOR_MOBILE_NO" jdbcType="VARCHAR" property="mobileNo" />
			<result column="GUARANTOR_RESIDENT_TEL_NO" jdbcType="VARCHAR" property="residentTelNo" />
			<result column="GUARANTOR_RELATIONSHIP" jdbcType="INTEGER" property="relationship" />
			<result column="GUARANTOR_RELATIONSHIP_OTHER" jdbcType="VARCHAR" property="relationshipOther" />
			<result column="GUARANTOR_CURRENT_ADDRESS" jdbcType="VARCHAR" property="currentAddress" />
			<result column="GUARANTOR_TYPE_OF_RESIDENCE" jdbcType="INTEGER" property="typeOfResidence" />
			<result column="GUARANTOR_TYPE_OF_RESIDENCE_OTHER" jdbcType="VARCHAR" property="typeOfResidenceOther" />
			<result column="GUARANTOR_LIVING_WITH" jdbcType="INTEGER" property="livingWith" />
			<result column="GUARANTOR_LIVING_WITH_OTHER" jdbcType="VARCHAR" property="livingWithOther" />
			<result column="GUARANTOR_GENDER" jdbcType="INTEGER" property="gender" />
			<result column="GUARANTOR_MARITAL_STATUS" jdbcType="INTEGER" property="maritalStatus" />
			<result column="GUARANTOR_YEAR_OF_STAY_YEAR" jdbcType="INTEGER" property="yearOfStayYear" />
			<result column="GUARANTOR_YEAR_OF_STAY_MONTH" jdbcType="INTEGER" property="yearOfStayMonth" />
			<result column="GUARANTOR_COMPANY_NAME" jdbcType="VARCHAR" property="companyName" />
			<result column="GUARANTOR_COMPANY_TEL_NO" jdbcType="VARCHAR" property="companyTelNo" />
			<result column="GUARANTOR_COMPANY_ADDRESS" jdbcType="VARCHAR" property="companyAddress" />
			<result column="GUARANTOR_DEPARTMENT" jdbcType="VARCHAR" property="department" />
			<result column="GUARANTOR_POSITION" jdbcType="VARCHAR" property="position" />
			<result column="GUARANTOR_YEAR_OF_SERVICE_YEAR" jdbcType="INTEGER" property="yearOfServiceYear" />
			<result column="GUARANTOR_YEAR_OF_SERVICE_MONTH" jdbcType="INTEGER" property="yearOfServiceMonth" />
			<result column="GUARANTOR_MONTHLY_BASIC_INCOME" jdbcType="DOUBLE" property="monthlyBasicIncome" />
			<result column="GUARANTOR_MONTHLY_TOTAL_INCOME" jdbcType="DOUBLE" property="totalIncome" />
			<result column="GUARANTOR_CURRENT_ADDRESS_FLOOR" jdbcType="VARCHAR" property="currentAddressFloor" />
			<result column="GUARANTOR_CURRENT_ADDRESS_BUILDING_NO" jdbcType="VARCHAR" property="currentAddressBuildingNo" />
			<result column="GUARANTOR_CURRENT_ADDRESS_ROOM_NO" jdbcType="VARCHAR" property="currentAddressRoomNo" />
			<result column="GUARANTOR_CURRENT_ADDRESS_STREET" jdbcType="VARCHAR" property="currentAddressStreet" />
			<result column="GUARANTOR_CURRENT_ADDRESS_QTR" jdbcType="VARCHAR" property="currentAddressQtr" />
			<result column="GUARANTOR_CURRENT_ADDRESS_TOWNSHIP" jdbcType="INTEGER" property="currentAddressTownship" />
			<result column="GUARANTOR_CURRENT_ADDRESS_CITY" jdbcType="INTEGER" property="currentAddressCity" />
			<result column="GUARANTOR_COMPANY_ADDRESS_BUILDING_NO" jdbcType="VARCHAR" property="companyAddressBuildingNo" />
			<result column="GUARANTOR_COMPANY_ADDRESS_ROOM_NO" jdbcType="VARCHAR" property="companyAddressRoomNo" />
			<result column="GUARANTOR_COMPANY_ADDRESS_FLOOR" jdbcType="VARCHAR" property="companyAddressFloor" />
			<result column="GUARANTOR_COMPANY_ADDRESS_STREET" jdbcType="VARCHAR" property="companyAddressStreet" />
			<result column="GUARANTOR_COMPANY_ADDRESS_QTR" jdbcType="VARCHAR" property="companyAddressQtr" />
			<result column="GUARANTOR_COMPANY_ADDRESS_TOWNSHIP" jdbcType="INTEGER" property="companyAddressTownship" />
			<result column="GUARANTOR_COMPANY_ADDRESS_CITY" jdbcType="INTEGER" property="companyAddressCity" />
		</association>
		
		<collection resultMap="applicationInfoAttachmentResultMap" property="applicationInfoAttachmentDtoList" />
	</resultMap>

	<resultMap id="applicationInfoAttachmentResultMap" type="mm.aeon.com.dto.applicationinfo.ApplicationInfoAttachmentDto">
		<id column="DA_APPLICATION_INFO_ATTACHMENT_ID" jdbcType="INTEGER" property="daApplicationInfoAttachmentId" />
		<result column="DAIA_DA_APPLICATION_INFO_ID" jdbcType="INTEGER" property="daApplicationInfoId" />
		<result column="FILE_PATH" jdbcType="VARCHAR" property="filePath" />
		<result column="FILE_TYPE" jdbcType="INTEGER" property="fileType" />
		<result column="EDIT_FLAG" jdbcType="BOOLEAN" property="editFlag" />
	</resultMap>

	<select id="getApplicationInfoDetail" parameterType="java.lang.Integer" resultMap="applicationInfoDetailResultMap">
		SELECT
			DAI.DA_APPLICATION_INFO_ID,
			DAI.APPLICATION_NO,
			DAI.APPLIED_DATE,
			DAI.CUSTOMER_ID,
			DAI.DA_APPLICATION_TYPE_ID,
			DAI.NAME,
			DAI.DOB,
			DAI.NRC_NO,
			DAI.FATHER_NAME,
			DAI.NATIONALITY,
			DAI.NATIONALITY_OTHER,
			DAI.GENDER,
			DAI.MARITAL_STATUS,
			DAI.CURRENT_ADDRESS,
			DAI.PERMANENT_ADDRESS,
			DAI.TYPE_OF_RESIDENCE,
			DAI.TYPE_OF_RESIDENCE_OTHER,
			DAI.LIVING_WITH,
			DAI.LIVING_WITH_OTHER,
			DAI.YEAR_OF_STAY_YEAR,
			DAI.YEAR_OF_STAY_MONTH,
			DAI.MOBILE_NO,
			DAI.RESIDENT_TEL_NO,
			DAI.OTHER_PHONE_NO,
			DAI.EMAIL,
			DAI.STATUS,
			DAI.DA_INTEREST_INFO_ID,
			DAI.DA_COMPULSORY_INFO_ID,
			DAI.DA_LOAN_TYPE_ID,
			DAI.FINANCE_AMOUNT,
			DAI.FINANCE_TERM,
			DAI.DA_PRODUCT_TYPE_ID,
			DAI.PRODUCT_DESCRIPTION,
			DAI.CHANNEL_TYPE,
			DAI.CURRENT_ADDRESS_FLOOR,
			DAI.CURRENT_ADDRESS_BUILDING_NO,
			DAI.CURRENT_ADDRESS_ROOM_NO,
			DAI.CURRENT_ADDRESS_STREET,
			DAI.CURRENT_ADDRESS_QTR,
			DAI.CURRENT_ADDRESS_TOWNSHIP,
			DAI.CURRENT_ADDRESS_CITY,
			DAI.PERMANENT_ADDRESS_BUILDING_NO,
			DAI.PERMANENT_ADDRESS_ROOM_NO,
			DAI.PERMANENT_ADDRESS_FLOOR,
			DAI.PERMANENT_ADDRESS_STREET,
			DAI.PERMANENT_ADDRESS_QTR,
			DAI.PERMANENT_ADDRESS_TOWNSHIP,
			DAI.PERMANENT_ADDRESS_CITY,
			DAI.SALE_ENTRY_CHECK_FLAG,
			DAI.HIGHEST_EDUCATION_TYPE_ID,
			DAI.APPROVED_FINANCE_AMOUNT,
			DAI.APPROVED_FINANCE_TERM,
			DAI.MODIFY_FINANCE_AMOUNT,
			DAI.MODIFY_FINANCE_TERM,
			DAI.CREATED_BY,
			DAI.CREATED_TIME,
			DAI.UPDATED_BY,
			DAI.UPDATED_TIME,
			DII.DA_INTEREST_INFO_ID,
			DII.INTEREST_RATE,
			DCI.DA_COMPULSORY_INFO_ID,
			DCI.COMPULSORY_AMOUNT,
			DACI.DA_APPLICANT_COMPANY_INFO_ID,
			DACI.DA_APPLICATION_INFO_ID AS DACI_DA_APPLICATION_INFO_ID,
			DACI.COMPANY_NAME,
			DACI.COMPANY_ADDRESS,
			DACI.COMPANY_TEL_NO,
			DACI.DEPARTMENT,
			DACI.POSITION,
			DACI.YEAR_OF_SERVICE_YEAR,
			DACI.YEAR_OF_SERVICE_MONTH,
			DACI.COMPANY_STATUS,
			DACI.COMPANY_STATUS_OTHER,
			DACI.MONTHLY_BASIC_INCOME,
			DACI.OTHER_INCOME,
			DACI.TOTAL_INCOME,
			DACI.SALARY_DAY,
			DACI.CONTACT_TIME_FROM,
			DACI.CONTACT_TIME_TO,
			DACI.COMPANY_ADDRESS_BUILDING_NO,
			DACI.COMPANY_ADDRESS_ROOM_NO,
			DACI.COMPANY_ADDRESS_FLOOR,
			DACI.COMPANY_ADDRESS_STREET,
			DACI.COMPANY_ADDRESS_QTR,
			DACI.COMPANY_ADDRESS_TOWNSHIP,
			DACI.COMPANY_ADDRESS_CITY,
			DECI.DA_EMERGENCY_CONTACT_INFO_ID,
			DECI.DA_APPLICATION_INFO_ID AS
			DECI_DA_APPLICATION_INFO_ID,
			DECI.NAME AS EMERGENCY_CONTACT_NAME,
			DECI.RELATIONSHIP AS EMERGENCY_CONTACT_RELATIONSHIP,
			DECI.RELATIONSHIP_OTHER AS EMERGENCY_CONTACT_RELATIONSHIP_OTHER,
			DECI.CURRENT_ADDRESS AS EMERGENCY_CONTACT_CURRENT_ADDRESS,
			DECI.MOBILE_NO AS EMERGENCY_CONTACT_MOBILE_NO,
			DECI.RESIDENT_TEL_NO AS
			EMERGENCY_CONTACT_RESIDENT_TEL_NO,
			DECI.OTHER_PHONE_NO AS
			EMERGENCY_CONTACT_OTHER_PHONE_NO,			
			DECI.CURRENT_ADDRESS_FLOOR AS EMERGENCY_CONTACT_CURRENT_ADDRESS_FLOOR,
			DECI.CURRENT_ADDRESS_BUILDING_NO AS EMERGENCY_CONTACT_CURRENT_ADDRESS_BUILDING_NO,
			DECI.CURRENT_ADDRESS_ROOM_NO AS EMERGENCY_CONTACT_CURRENT_ADDRESS_ROOM_NO,
			DECI.CURRENT_ADDRESS_STREET AS EMERGENCY_CONTACT_CURRENT_ADDRESS_STREET,
			DECI.CURRENT_ADDRESS_QTR AS EMERGENCY_CONTACT_CURRENT_ADDRESS_QTR,
			DECI.CURRENT_ADDRESS_TOWNSHIP AS EMERGENCY_CONTACT_CURRENT_ADDRESS_TOWNSHIP,
			DECI.CURRENT_ADDRESS_CITY AS EMERGENCY_CONTACT_CURRENT_ADDRESS_CITY,
			DGI.DA_GUARANTOR_INFO_ID,
			DGI.DA_APPLICATION_INFO_ID AS DGI_DA_APPLICATION_INFO_ID,
			DGI.NAME AS
			GUARANTOR_NAME,
			DGI.DOB AS GUARANTOR_DOB,
			DGI.NRC_NO AS
			GUARANTOR_NRC_NO,
			DGI.NATIONALITY AS GUARANTOR_NATIONALITY,
			DGI.NATIONALITY_OTHER AS GUARANTOR_NATIONALITY_OTHER,
			DGI.MOBILE_NO AS
			GUARANTOR_MOBILE_NO,
			DGI.RESIDENT_TEL_NO AS GUARANTOR_RESIDENT_TEL_NO,
			DGI.RELATIONSHIP AS GUARANTOR_RELATIONSHIP,
			DGI.RELATIONSHIP_OTHER AS
			GUARANTOR_RELATIONSHIP_OTHER,
			DGI.CURRENT_ADDRESS AS
			GUARANTOR_CURRENT_ADDRESS,
			DGI.TYPE_OF_RESIDENCE AS
			GUARANTOR_TYPE_OF_RESIDENCE,
			DGI.TYPE_OF_RESIDENCE_OTHER AS
			GUARANTOR_TYPE_OF_RESIDENCE_OTHER,
			DGI.LIVING_WITH AS
			GUARANTOR_LIVING_WITH,
			DGI.LIVING_WITH_OTHER AS
			GUARANTOR_LIVING_WITH_OTHER,
			DGI.GENDER AS GUARANTOR_GENDER,
			DGI.MARITAL_STATUS AS GUARANTOR_MARITAL_STATUS,
			DGI.YEAR_OF_STAY_YEAR
			AS GUARANTOR_YEAR_OF_STAY_YEAR,
			DGI.YEAR_OF_STAY_MONTH AS
			GUARANTOR_YEAR_OF_STAY_MONTH,
			DGI.COMPANY_NAME AS
			GUARANTOR_COMPANY_NAME,
			DGI.COMPANY_TEL_NO AS GUARANTOR_COMPANY_TEL_NO,
			DGI.COMPANY_ADDRESS AS GUARANTOR_COMPANY_ADDRESS,
			DGI.DEPARTMENT AS
			GUARANTOR_DEPARTMENT,
			DGI.POSITION AS GUARANTOR_POSITION,
			DGI.YEAR_OF_SERVICE_YEAR AS GUARANTOR_YEAR_OF_SERVICE_YEAR,
			DGI.YEAR_OF_SERVICE_MONTH AS GUARANTOR_YEAR_OF_SERVICE_MONTH,
			DGI.MONTHLY_BASIC_INCOME AS GUARANTOR_MONTHLY_BASIC_INCOME,
			DGI.TOTAL_INCOME AS GUARANTOR_MONTHLY_TOTAL_INCOME,
			DGI.CURRENT_ADDRESS_FLOOR AS GUARANTOR_CURRENT_ADDRESS_FLOOR,
			DGI.CURRENT_ADDRESS_BUILDING_NO AS GUARANTOR_CURRENT_ADDRESS_BUILDING_NO,
			DGI.CURRENT_ADDRESS_ROOM_NO AS GUARANTOR_CURRENT_ADDRESS_ROOM_NO,
			DGI.CURRENT_ADDRESS_STREET AS GUARANTOR_CURRENT_ADDRESS_STREET,
			DGI.CURRENT_ADDRESS_QTR AS GUARANTOR_CURRENT_ADDRESS_QTR,
			DGI.CURRENT_ADDRESS_TOWNSHIP AS GUARANTOR_CURRENT_ADDRESS_TOWNSHIP,
			DGI.CURRENT_ADDRESS_CITY AS GUARANTOR_CURRENT_ADDRESS_CITY,
			DGI.COMPANY_ADDRESS_BUILDING_NO AS GUARANTOR_COMPANY_ADDRESS_BUILDING_NO,
			DGI.COMPANY_ADDRESS_ROOM_NO AS GUARANTOR_COMPANY_ADDRESS_ROOM_NO,
			DGI.COMPANY_ADDRESS_FLOOR AS GUARANTOR_COMPANY_ADDRESS_FLOOR,
			DGI.COMPANY_ADDRESS_STREET AS GUARANTOR_COMPANY_ADDRESS_STREET,
			DGI.COMPANY_ADDRESS_QTR AS GUARANTOR_COMPANY_ADDRESS_QTR,
			DGI.COMPANY_ADDRESS_TOWNSHIP AS GUARANTOR_COMPANY_ADDRESS_TOWNSHIP,
			DGI.COMPANY_ADDRESS_CITY AS GUARANTOR_COMPANY_ADDRESS_CITY,
			DAIA.DA_APPLICATION_INFO_ATTACHMENT_ID,
			DAIA.DA_APPLICATION_INFO_ID AS
			DAIA_DA_APPLICATION_INFO_ID,
			DAIA.FILE_PATH,
			DAIA.FILE_TYPE,
			DAIA.EDIT_FLAG
		FROM
			da_application_info DAI
		LEFT JOIN
			da_applicant_company_info DACI
		ON
			DAI.DA_APPLICATION_INFO_ID = DACI.DA_APPLICATION_INFO_ID
		LEFT JOIN
			da_emergency_contact_info DECI
		ON
			DAI.DA_APPLICATION_INFO_ID = DECI.DA_APPLICATION_INFO_ID
		LEFT JOIN
			da_guarantor_info DGI
		ON
			DAI.DA_APPLICATION_INFO_ID = DGI.DA_APPLICATION_INFO_ID
		LEFT JOIN
			da_application_info_attachment DAIA
		ON
			DAI.DA_APPLICATION_INFO_ID = DAIA.DA_APPLICATION_INFO_ID
		LEFT JOIN
			da_interest_info DII
		ON
			DAI.DA_INTEREST_INFO_ID = DII.DA_INTEREST_INFO_ID
		LEFT JOIN
			da_compulsory_info DCI
		ON
			DAI.DA_COMPULSORY_INFO_ID = DCI.DA_COMPULSORY_INFO_ID
		LEFT JOIN
			cust_agreement_list CAL
		ON
			DAI.APPLICATION_NO = CAL.APPLICATION_NO
		WHERE
			DAI.DA_APPLICATION_INFO_ID = #{daApplicationInfoId,jdbcType=INTEGER}
	</select>

	<select id="getLastApplicationInfo"
		parameterType="java.lang.Integer"
		resultMap="applicationInfoDetailResultMap">
		SELECT
		DAI.DA_APPLICATION_INFO_ID,
		DAI.APPLICATION_NO,
		DAI.APPLIED_DATE,
		DAI.CUSTOMER_ID,
		DAI.DA_APPLICATION_TYPE_ID,
		DAI.NAME,
		DAI.DOB,
		DAI.NRC_NO,
		DAI.FATHER_NAME,
		DAI.NATIONALITY,
		DAI.NATIONALITY_OTHER,
		DAI.GENDER,
		DAI.MARITAL_STATUS,
		DAI.CURRENT_ADDRESS,
		DAI.PERMANENT_ADDRESS,
		DAI.TYPE_OF_RESIDENCE,
		DAI.TYPE_OF_RESIDENCE_OTHER,
		DAI.LIVING_WITH,
		DAI.LIVING_WITH_OTHER,
		DAI.YEAR_OF_STAY_YEAR,
		DAI.YEAR_OF_STAY_MONTH,
		DAI.MOBILE_NO,
		DAI.RESIDENT_TEL_NO,
		DAI.OTHER_PHONE_NO,
		DAI.EMAIL,
		DAI.STATUS,
		DAI.DA_INTEREST_INFO_ID,
		DAI.DA_COMPULSORY_INFO_ID,
		DAI.DA_LOAN_TYPE_ID,
		DAI.FINANCE_AMOUNT,
		DAI.FINANCE_TERM,
		DAI.DA_PRODUCT_TYPE_ID,
		DAI.PRODUCT_DESCRIPTION,
		DAI.CHANNEL_TYPE,
		DAI.CURRENT_ADDRESS_FLOOR,
		DAI.CURRENT_ADDRESS_BUILDING_NO,
		DAI.CURRENT_ADDRESS_ROOM_NO,
		DAI.CURRENT_ADDRESS_STREET,
		DAI.CURRENT_ADDRESS_QTR,
		DAI.CURRENT_ADDRESS_TOWNSHIP,
		DAI.CURRENT_ADDRESS_CITY,
		DAI.PERMANENT_ADDRESS_BUILDING_NO,
		DAI.PERMANENT_ADDRESS_ROOM_NO,
		DAI.PERMANENT_ADDRESS_FLOOR,
		DAI.PERMANENT_ADDRESS_STREET,
		DAI.PERMANENT_ADDRESS_QTR,
		DAI.PERMANENT_ADDRESS_TOWNSHIP,
		DAI.PERMANENT_ADDRESS_CITY,
		DAI.SALE_ENTRY_CHECK_FLAG,
		DAI.HIGHEST_EDUCATION_TYPE_ID,
		DAI.APPROVED_FINANCE_AMOUNT,
		DAI.APPROVED_FINANCE_TERM,
		DAI.MODIFY_FINANCE_AMOUNT,
		DAI.MODIFY_FINANCE_TERM,
		DAI.CREATED_BY,
		DAI.CREATED_TIME,
		DAI.UPDATED_BY,
		DAI.UPDATED_TIME,
		DACI.DA_APPLICANT_COMPANY_INFO_ID,
		DACI.COMPANY_NAME,
		DACI.COMPANY_ADDRESS,
		DACI.COMPANY_TEL_NO,
		DACI.DEPARTMENT,
		DACI.POSITION,
		DACI.YEAR_OF_SERVICE_YEAR,
		DACI.YEAR_OF_SERVICE_MONTH,
		DACI.COMPANY_STATUS,
		DACI.COMPANY_STATUS_OTHER,
		DACI.MONTHLY_BASIC_INCOME,
		DACI.OTHER_INCOME,
		DACI.TOTAL_INCOME,
		DACI.SALARY_DAY,
		DACI.CONTACT_TIME_FROM,
		DACI.CONTACT_TIME_TO,
		DACI.COMPANY_ADDRESS_BUILDING_NO,
		DACI.COMPANY_ADDRESS_ROOM_NO,
		DACI.COMPANY_ADDRESS_FLOOR,
		DACI.COMPANY_ADDRESS_STREET,
		DACI.COMPANY_ADDRESS_QTR,
		DACI.COMPANY_ADDRESS_TOWNSHIP,
		DACI.COMPANY_ADDRESS_CITY,
		DECI.DA_EMERGENCY_CONTACT_INFO_ID,
		DECI.NAME AS EMERGENCY_CONTACT_NAME,
		DECI.RELATIONSHIP AS EMERGENCY_CONTACT_RELATIONSHIP,
		DECI.RELATIONSHIP_OTHER AS EMERGENCY_CONTACT_RELATIONSHIP_OTHER,
		DECI.CURRENT_ADDRESS AS EMERGENCY_CONTACT_CURRENT_ADDRESS,
		DECI.MOBILE_NO AS EMERGENCY_CONTACT_MOBILE_NO,
		DECI.RESIDENT_TEL_NO AS
		EMERGENCY_CONTACT_RESIDENT_TEL_NO,
		DECI.OTHER_PHONE_NO AS
		EMERGENCY_CONTACT_OTHER_PHONE_NO,
		DECI.CURRENT_ADDRESS_FLOOR AS EMERGENCY_CONTACT_CURRENT_ADDRESS_FLOOR,
		DECI.CURRENT_ADDRESS_BUILDING_NO AS EMERGENCY_CONTACT_CURRENT_ADDRESS_BUILDING_NO,
		DECI.CURRENT_ADDRESS_ROOM_NO AS EMERGENCY_CONTACT_CURRENT_ADDRESS_ROOM_NO,
		DECI.CURRENT_ADDRESS_STREET AS EMERGENCY_CONTACT_CURRENT_ADDRESS_STREET,
		DECI.CURRENT_ADDRESS_QTR AS EMERGENCY_CONTACT_CURRENT_ADDRESS_QTR,
		DECI.CURRENT_ADDRESS_TOWNSHIP AS EMERGENCY_CONTACT_CURRENT_ADDRESS_TOWNSHIP,
		DECI.CURRENT_ADDRESS_CITY AS EMERGENCY_CONTACT_CURRENT_ADDRESS_CITY,
		DGI.DA_GUARANTOR_INFO_ID,
		DGI.NAME AS
		GUARANTOR_NAME,
		DGI.DOB AS GUARANTOR_DOB,
		DGI.NRC_NO AS
		GUARANTOR_NRC_NO,
		DGI.NATIONALITY AS GUARANTOR_NATIONALITY,
		DGI.NATIONALITY_OTHER AS GUARANTOR_NATIONALITY_OTHER,
		DGI.MOBILE_NO AS
		GUARANTOR_MOBILE_NO,
		DGI.RESIDENT_TEL_NO AS GUARANTOR_RESIDENT_TEL_NO,
		DGI.RELATIONSHIP AS GUARANTOR_RELATIONSHIP,
		DGI.RELATIONSHIP_OTHER AS
		GUARANTOR_RELATIONSHIP_OTHER,
		DGI.CURRENT_ADDRESS AS
		GUARANTOR_CURRENT_ADDRESS,
		DGI.TYPE_OF_RESIDENCE AS
		GUARANTOR_TYPE_OF_RESIDENCE,
		DGI.TYPE_OF_RESIDENCE_OTHER AS
		GUARANTOR_TYPE_OF_RESIDENCE_OTHER,
		DGI.LIVING_WITH AS
		GUARANTOR_LIVING_WITH,
		DGI.LIVING_WITH_OTHER AS
		GUARANTOR_LIVING_WITH_OTHER,
		DGI.GENDER AS GUARANTOR_GENDER,
		DGI.MARITAL_STATUS AS GUARANTOR_MARITAL_STATUS,
		DGI.YEAR_OF_STAY_YEAR
		AS GUARANTOR_YEAR_OF_STAY_YEAR,
		DGI.YEAR_OF_STAY_MONTH AS
		GUARANTOR_YEAR_OF_STAY_MONTH,
		DGI.COMPANY_NAME AS
		GUARANTOR_COMPANY_NAME,
		DGI.COMPANY_TEL_NO AS GUARANTOR_COMPANY_TEL_NO,
		DGI.COMPANY_ADDRESS AS GUARANTOR_COMPANY_ADDRESS,
		DGI.DEPARTMENT AS
		GUARANTOR_DEPARTMENT,
		DGI.POSITION AS GUARANTOR_POSITION,
		DGI.YEAR_OF_SERVICE_YEAR AS GUARANTOR_YEAR_OF_SERVICE_YEAR,
		DGI.YEAR_OF_SERVICE_MONTH AS GUARANTOR_YEAR_OF_SERVICE_MONTH,
		DGI.MONTHLY_BASIC_INCOME AS GUARANTOR_MONTHLY_BASIC_INCOME,
		DGI.TOTAL_INCOME AS GUARANTOR_MONTHLY_TOTAL_INCOME,
		DGI.CURRENT_ADDRESS_FLOOR AS GUARANTOR_CURRENT_ADDRESS_FLOOR,
		DGI.CURRENT_ADDRESS_BUILDING_NO AS GUARANTOR_CURRENT_ADDRESS_BUILDING_NO,
		DGI.CURRENT_ADDRESS_ROOM_NO AS GUARANTOR_CURRENT_ADDRESS_ROOM_NO,
		DGI.CURRENT_ADDRESS_STREET AS GUARANTOR_CURRENT_ADDRESS_STREET,
		DGI.CURRENT_ADDRESS_QTR AS GUARANTOR_CURRENT_ADDRESS_QTR,
		DGI.CURRENT_ADDRESS_TOWNSHIP AS GUARANTOR_CURRENT_ADDRESS_TOWNSHIP,
		DGI.CURRENT_ADDRESS_CITY AS GUARANTOR_CURRENT_ADDRESS_CITY,
		DGI.COMPANY_ADDRESS_BUILDING_NO AS GUARANTOR_COMPANY_ADDRESS_BUILDING_NO,
		DGI.COMPANY_ADDRESS_ROOM_NO AS GUARANTOR_COMPANY_ADDRESS_ROOM_NO,
		DGI.COMPANY_ADDRESS_FLOOR AS GUARANTOR_COMPANY_ADDRESS_FLOOR,
		DGI.COMPANY_ADDRESS_STREET AS GUARANTOR_COMPANY_ADDRESS_STREET,
		DGI.COMPANY_ADDRESS_QTR AS GUARANTOR_COMPANY_ADDRESS_QTR,
		DGI.COMPANY_ADDRESS_TOWNSHIP AS GUARANTOR_COMPANY_ADDRESS_TOWNSHIP,
		DGI.COMPANY_ADDRESS_CITY AS GUARANTOR_COMPANY_ADDRESS_CITY,
		DAIA.DA_APPLICATION_INFO_ATTACHMENT_ID,
		DAIA.FILE_PATH,
		DAIA.FILE_TYPE,
		DAIA.EDIT_FLAG
		FROM
		(SELECT
		*
		FROM
		da_application_info
		WHERE
		CUSTOMER_ID =
		#{customerId,jdbcType=INTEGER}
		ORDER BY
		APPLIED_DATE DESC
		LIMIT 1
		)DAI
		LEFT JOIN
		da_applicant_company_info DACI
		ON
		DAI.DA_APPLICATION_INFO_ID =
		DACI.DA_APPLICATION_INFO_ID
		LEFT JOIN
		da_emergency_contact_info DECI
		ON
		DAI.DA_APPLICATION_INFO_ID = DECI.DA_APPLICATION_INFO_ID
		LEFT JOIN
		da_guarantor_info DGI
		ON
		DAI.DA_APPLICATION_INFO_ID =
		DGI.DA_APPLICATION_INFO_ID
		LEFT JOIN
		da_application_info_attachment DAIA
		ON
		DAI.DA_APPLICATION_INFO_ID = DAIA.DA_APPLICATION_INFO_ID
	</select>

	<select id="getPurchaseApplicationAttachmentList"
		parameterType="java.lang.Integer"
		resultMap="applicationInfoAttachmentResultMap">
		SELECT
		DAIA.DA_APPLICATION_INFO_ATTACHMENT_ID,
		DAIA.DA_APPLICATION_INFO_ID AS DAIA_DA_APPLICATION_INFO_ID,
		DAIA.FILE_PATH,
		DAIA.FILE_TYPE,
		DAIA.EDIT_FLAG
		FROM
		da_application_info_attachment DAIA
		WHERE
		DAIA.DA_APPLICATION_INFO_ID =
		#{daApplicationInfoId,jdbcType=INTEGER}
	</select>

	<select id="getApplicationStatusCount" parameterType="map"
		resultType="java.lang.Integer">
		SELECT
		COUNT(*)
		FROM
		da_application_info DAI
		WHERE
		DAI.CUSTOMER_ID = #{customerId,jdbcType=INTEGER}
		AND
		STATUS =
		#{status,jdbcType=INTEGER}
	</select>
	
	<select id="getApplicationStatusChangedCount" parameterType="map"
		resultType="java.lang.Integer">
		SELECT
			COUNT(*)
		FROM
			da_application_info DAI
		WHERE
			DAI.CUSTOMER_ID = #{customerId,jdbcType=INTEGER}
		AND
			STATUS_CHANGED_READ_FLAG = FALSE
		AND
			STATUS IN (5,8,9,10,17)
	</select>

</mapper>